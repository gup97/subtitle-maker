---
title: 'ìë§‰ìƒì„±ê¸° ê¸°ëŠ¥êµ¬í˜„'
date: 2021-12-01 09:17:00
category: 'sub-project'
draft: false
---


[![ë¯¸ë¦¬ë³´ê¸°](https://images.velog.io/images/gup97/post/cef5ceb6-6089-4886-bbd8-d3cd733b011c/image.png)](https://gup97.github.io/subtitle-maker/)

## ì–´ë””ì„œ ë³¸ê±°ê°™ì€ë°?

>ì£¼ì˜! Reactê³µë¶€í•˜ê¸°ì „ ë§›ë³´ê¸°ë¡œ ë§Œë“¤ì–´ì„œ ì½”ë“œê°€ ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤!!  
React ê³µë¶€ í›„ ë‹¤ì‹œ ì†ë³´ê² ìŠµë‹ˆë‹¤

ê·¸ë ‡ìŠµë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ëŠ” [ê³½ì² ìš© ì§¤ ìƒì„±ê¸°](https://wormwlrm.github.io/2019/10/13/Kwakcheolyong-Image-Creator-Development-Story.html)ì™€ [ë°°ë„ˆìƒì„±ê¸°](https://velog.io/@godori/banner-maker)ë¥¼ ë³´ê³  ë§Œë“¤ì–´ì•¼ê² ë‹¤ê³  ìƒê°í•œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ê·¸ëŸ°ì§€ ì¸í„°í˜ì´ìŠ¤ë¶€í„° ì½”ë“œ ë¶€ ê¹Œì§€ ì˜í–¥ì„ ë§ì´ ë°›ì•˜ëŠ”ë°, ì½”ë“œë§Œ ë”± ê¸ì–´ì„œ ìê¸° ê²ƒì²˜ëŸ¼ ì“°ëŠ” ê±°ë¡œ ë³´ì¼ê¹Œ ë´ ê±±ì •ë˜ë„¤ìš”.

ìš°ì„  ì²˜ìŒ ì € ì§¤ ìƒì„±ê¸° í¬ìŠ¤íŒ…ì„ ë´¤ì„ ë•Œ ê¹œì§ ë†€ëìŠµë‹ˆë‹¤. ì œê°€ ì•„ëŠ” ê¸°ìˆ  ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì€ ë³´ê³  ìˆì„ ë•Œ ê³µë¶€ë¥¼ í•˜ëŠ” ê¸°ë¶„ì´ì—ˆëŠ”ë° ì € í¬ìŠ¤íŠ¸ëŠ” ì›¹íˆ°ì„ ë³´ëŠ” ê²ƒì²˜ëŸ¼ ìˆ ìˆ  ìµí˜”ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê¸€ì¬ì£¼ë„, ë§ì¬ì£¼ë„ ì—†ëŠ” ì €ëŠ” ì €ë ‡ê²Œ ì‘ì„±í•´ë³´ê³  ì‹¶ë‹¤ëŠ” ìƒê° ë•Œë¬¸ì— ë”ìš± ê´€ì‹¬ì„ ê°–ê³  ë³¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
>
_ìš°ì„  í¬ìŠ¤íŒ…í•´ì¤€ ì¬ê·¸ì§€ê·¸ë‹˜ì—ê²Œ ê°ì‚¬í•˜ë‹¤ëŠ” ë§ë¶€í„° ì „í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.
ê·¸ë¦¬ê³  í”„ë¡œì íŠ¸ë¶€í„° í¬ìŠ¤íŠ¸ê¹Œì§€ í´ë¡ ì½”ë”©í•˜ì—¬ ì£„ì†¡í•©ë‹ˆë‹¤...._

ê³½ì² ìš© ì§¤ ìƒì„±ê¸°ì˜ ê¸€ì€ ê¸°ëŠ¥ë¶€ì™€ ì½”ë“œ ì‘ì„± ê³¼ì •ì„ ìˆœì°¨ì ìœ¼ë¡œ ìƒì„¸íˆ ë‚˜íƒ€ë‚´ê³  ìˆëŠ”ë° , ì¤‘ê°„ì¤‘ê°„ ì¬ë°ŒëŠ” ì´ë¯¸ì§€ë¥¼ ê°™ì´ ë„£ì–´ ì¬ë¯¸ì„ ë”í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë¯¸ì§€ë¥¼ ë³´ë‹¤ ë³´ë‹ˆ ê°‘ìê¸° ì˜›ë‚ ì— ì»¤ë®¤ë‹ˆí‹°ë¥¼ ëŒì•„ë‹¤ë‹ë•Œ ë³¸ ì´ë¯¸ì§€ë“¤ì´ ê¸°ì–µë‚¬ìŠµë‹ˆë‹¤.  ê·¸ê±´ë°”ë¡œ..

![ì•„ê·€ìë§‰](https://images.velog.io/images/gup97/post/85f63764-e7e7-4332-9790-21b891d7bdae/%EC%95%84%EA%B7%80_%EC%9E%90%EB%A7%89.png)

ì—¬ëŸ¬ë¶„ë“¤ì€ ê¸°ì–µë‚˜ì‹œë‚˜ìš”? ì§¤ë°©ì´ë¼ëŠ” ìš©ì–´ì™€ ì‹±í•˜í˜•, Xë‚˜ ì¢‹êµ°? ë“±ì˜ ì§¤ë°©ë“¤ì´ ìœ í–‰í–ˆë˜ ì‹œì ˆ, ì˜í™”ì¥ë©´ì— ìƒí™©ì— ë§ì§€ ì•ŠëŠ” ìë§‰ì„ ë¶™ì—¬ì„œ ì¬ë°Œê²Œ ë´¤ë˜ ì§¤ë°©ì´ ëª‡ê°€ì§€ ê¸°ì–µë‚¬ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ë„ ìœ„ì—ì„œ ì–¸ê¸‰í•œ ë‘ í”„ë¡œì íŠ¸ë¥¼ í™œìš©í•˜ì—¬ ë§Œë“¤ì–´ ë³´ê³  ì‹¶ì–´ì„œ ìë§‰ìƒì„±ê¸°ë¥¼ ë§Œë“¤ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

### ê·¸ë˜ì„œ ì–´ë–»ê²Œ ë§Œë“¤êº¼ì•¼?

![ê³µìœ ë”±ì§€](https://images.velog.io/images/gup97/post/168590b1-4b01-4afa-8541-fe6b64770052/sample%20(1).png)

ì œê°€ ë§Œë“¤ ì‚¬ì´íŠ¸ëŠ” SPA(ì‹±ê¸€ í˜ì´ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜)ì´ê¸° ë•Œë¬¸ì— í‰ì†Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œë§Œ ë„ì ì´ë˜ ì €ëŠ” ì´ë²ˆ ê¸°íšŒì— Reactë¥¼ ê³µë¶€í•˜ë ¤ê³  ì •í–ˆìŠµë‹ˆë‹¤. í˜¸ê¸°ë¡­ê²Œ ì‹œì‘í–ˆë˜ ì €ëŠ” `npx create-react-app` ë„ í•´ë³¸ì  ì—†ëŠ” ì•„ê°€ì˜€ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì–´ë””ì„œë¶€í„° ì–´ë–»ê²Œ í¬ìŠ¤íŒ…í• ê¹Œ ìƒê°í•´ë´¤ëŠ”ë°, ìš°ì„  ëª©í‘œëŠ” ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” ì‚¬ëŒë¶€í„°ëŠ” í¸í•˜ê²Œ ë³¼ ìˆ˜ ìˆë„ë¡ ì‘ì„±í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.
> _ì½”ë“œ ì¤‘ `props`ì™€ `state`ë¥¼ ì´ìƒí•˜ê²Œ ë‹¤ë£¨ëŠ” ë¶€ë¶„ì´ë‚˜ ë”ìš± ê¹”ë”í•˜ê²Œ í™œìš©í•  ë°©ë²•ì´ ìƒê°ë‚  ë•Œ, ëŒ“ê¸€ë¡œ ì•Œë ¤ì£¼ì‹ ë‹¤ë©´ ë„ˆë¬´ë‚˜ë„ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.
_

### ì¼ë‹¨ ì‹œì‘í•˜ê¸°

ìš°ì„  í”„ë¡œì íŠ¸ë¥¼ ëë‚´ë ¤ë©´ ì„¤ê³„ë¥¼ ì„¸ì›Œì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì–´ë–¤ ê¸°ìˆ ì´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€, ë‚´ê°€ ì–´ë””ê¹Œì§€ êµ¬í˜„í•  ìˆ˜ ìˆëŠ”ì§€ ì˜ ëª¨ë¥´ëŠ” ì €ëŠ” ì–´ë–¤ ê¸°ëŠ¥ê¹Œì§€ êµ¬í˜„ ê°€ëŠ¥í•œì§€ í•˜ë‚˜í•˜ë‚˜ ë§Œë“¤ì–´ ë³´ëŠ” ë°©ë²•ì„ íƒí–ˆìŠµë‹ˆë‹¤.
_(í”„ë¡œê·¸ë˜ë¨¸ë¼ë©´ êµ¬ì¡°ë¥¼ ë¯¸ë¦¬ ì •í•´ë‘¬ì•¼ í•œë‹¤ê³  í–ˆëŠ”ë°..)_

ì²˜ìŒ ëª©í‘œëŠ” ì‚¬ì§„ì´ ë‹´ê¸´ ìº”ë²„ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ìº”ë²„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ [ê´€ë ¨ í”„ë¡œì íŠ¸](https://velog.io/@gup97/velog-coffee)ë¥¼ ë§Œë“¤ì–´ë³¸ ì ì´ ìˆëŠ” ì €ëŠ” ì´ì „ì˜ ê²½í—˜ì„ ì‚´ë¦¬ì§€ë„ ëª»í•œ ì±„, ì´ë²ˆì—ë„ [MDN](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage) ì˜ ë„ì›€ì„ ë°›ì•˜ìŠµë‹ˆë‹¤. í‘í‘

## ìº”ë²„ìŠ¤ ìƒì„±

ì¼ë‹¨ `ctrl`+`j` ëˆŒëŸ¬ì„œ cmd ì—´ì–´ì„œ í”„ë¡œì íŠ¸ ë§Œë“  í›„, í´ë” ì´ë™í•˜ê³ 

```terminal
npx create-react-app subtitle-maker
cd subtitle-maker
```

`src`í´ë”ì•ˆì— `components` í´ë”ì™€ ê·¸ ì•ˆì—`assets` í´ë”ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”
ìš°ì„  í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ê¸°ì— ì•ì„œ ì›í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ í•˜ë‚˜ ë‹¤ìš´ ë°›ì€ í›„,
`intro.png` ë¡œ ì´ë¦„ì„ ë°”ê¾¼ í›„ `assets` í´ë”ì— ë„£ì–´ì£¼ì„¸ìš”.
ê·¸ë¦¬ê³  ì´ì œ `App.js` ë¥¼ ì‘ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.

### ì „ì²´ ì½”ë“œ

```jsx
import React from 'react';
import ë„ì§€ from './components/assets/intro.png';
class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      width: "500",
      height: "500",
      img: ë„ì§€,
    };
    this.canvasRef = React.createRef();
  }
  createCanvas() {
    const canvas = this.canvasRef.current;
    const ctx = canvas.getContext("2d");
    const { text,img } = this.state;
    const image = new Image();
    image.src = img;
    image.onload = () => {
      canvas.width = image.width;
      canvas.height = image.height;
      ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
      //this.setFont(canvas, text);
    }
  }
  componentDidMount() {
    this.createCanvas();
  }
  render() {
    return (
      <div>
        <h1>ìë§‰ìƒì„±ê¸° BETA</h1>
        <div className="canvasTab">
          <canvas ref={this.canvasRef} className="previewCanvas" />
        </div>
      </div>
    )
  }
}
export default App;

```

ì½”ë“œë¡œ ë³´ë‹ˆ ì–´ë µì£ ? ì‰½ë‹¤ê³ ìš”? ì €ëŠ” ë§¤ìš° ì–´ë ¤ì› ìŠµë‹ˆë‹¤.
ê·¸ë˜ì„œ ì½”ë“œ í•˜ë‚˜í•˜ë‚˜ ë–¼ì–´ì„œ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ìš°ì„  `constructor` ë¨¼ì € ë³´ê² ìŠµë‹ˆë‹¤.

```js
  constructor(props) {
    super(props);
    this.state = {
      width: "500",
      height: "500",
      img: ë„ì§€,
    };
    this.canvasRef = React.createRef();
  }
```

ì €ëŠ” ì˜ ëª¨ë¥´ëŠ”ë° `constructor` ëŠ” ìƒì„±ìë¡œ ìœ ëª…í•˜ì£ ? ì•„ë§ˆ`index.js` ì—ì„œ  `App` ì´ ìƒì„±ë  ë•Œ ì‹œì‘í•˜ëŠ”ê±° ê°™ì•„ìš”. ìš°ì„  ìš°ë¦° ì´ˆë³´ë‹ˆê¹Œ ìì„¸í•œ ë‚´ìš©ë“¤ì€ ì°¨ì°¨ ê³µë¶€í•˜ê³  **`constructor`ëŠ” ì²˜ìŒ ë§Œë“¤ì–´ì§ˆë•Œ ì‹œì‘ë˜ê³ , `state` ì™€ `canvasRef`ë¥¼ ê°€ì§€ëŠ”êµ¬ë‚˜? ë¼ê³ ë§Œ ìƒê°í•˜ê² ìŠµë‹ˆë‹¤.**
> constructor ë©”ì„œë“œëŠ” í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì´ˆê¸°í™”í•˜ëŠ” íŠ¹ë³„í•œ ë©”ì„œë“œì…ë‹ˆë‹¤. -[ìì„¸í•œ ë‚´ìš©ì€ MDN](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Classes/constructor)-

ê·¸ ë‹¤ìŒì€ `canvas` ì— ì´ë¯¸ì§€ë¥¼ ë„£ì–´ ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.

```js
  createCanvas() {
    const canvas = this.canvasRef.current;
    const ctx = canvas.getContext("2d");
    const { img } = this.state;
    const image = new Image();
    image.src = img;
    image.onload = () => {
      canvas.width = image.width;
      canvas.height = image.height;
      ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
    }
  }
```

ì•„ê¹Œ ë§Œë“  `canvasRef.current` ì—ì„œ í˜„ì¬ ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ê³ ,
`canvas.getContext(2D)` ë¡œ 2ì°¨ì› ë Œë”ë§ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ê³ ,
`image` ê°ì²´ë¥¼ ìƒì„±í•˜ê³ ,
`image.src`ì—ì„œ ì•„ê¹Œ `state` ì— ë‹´ê²¨ìˆë˜ `img`ë¥¼ ë„£ê³ 
`image.onload` ì—ì„œ ë¹„ë™ê¸°ë¡œ ìƒì„±í•œ í›„,
ìº”ë²„ìŠ¤ì˜ ê°€ë¡œ ì„¸ë¡œëŠ” ì´ë¯¸ì§€ì˜ ê°€ë¡œ ì„¸ë¡œë§Œí¼ ì§€ì •í•˜ê³ ,
`ctx.drawImage` ë¡œ ì´ë¯¸ì§€ë¥¼ ê·¸ë¦°ë‹¤.
> ë„ì›€ë°›ì•˜ìŠµë‹ˆë‹¤ [ì´ë²ˆì—ë„ MDN](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage)

```js
  componentDidMount() {
    this.createCanvas();
  }
```

ê·¸ë¦¬ê³  ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ëœ ì§í›„, ì¦‰ íŠ¸ë¦¬ì— ì‚½ì…ëœ ì§í›„ì— í˜¸ì¶œë˜ëŠ”
`componentDidMount()`ì—ì„œ ì•„ê¹Œ ë§Œë“  í•¨ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜¤ë©´ ìº”ë²„ìŠ¤ê°€ ë‚˜ì˜µë‹ˆë‹¤.
> `componentDidMount()`ëŠ” ë­”ë°? -> [ì°¸ê³ ìë£Œ](https://ko.reactjs.org/docs/react-component.html#componentdidmount)

### Canvas ì™„ì„±ë³¸

ê·¸ëŸ¼ ì´ë ‡ê²Œ ì™„ì„±ëœë‹¤. ë„ì§€ê°€ ìŠ¬í”ˆ ëˆˆìœ¼ë¡œ ë°”ë¼ë³´ê³ ìˆë‹¤.![ìº¡ì³](https://images.velog.io/images/gup97/post/39276cbd-3e42-4241-8603-3091225562fa/image.png)

---

## ì´ë¯¸ì§€ ì—…ë¡œë“œ

ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ì—¬ ì›í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ ì¶œë ¥í•´ë³´ëŠ”ê±¸ ëª©í‘œë¡œ
ì¼ë‹¨ `components` í´ë”ì— `UploadImage.js` í•˜ë‚˜ ìƒì„±í•©ë‹ˆë‹¤.

 ì „ì²´ ì½”ë“œ

```js
//UploadImage.js
import React, { Component } from "react";
class UploadImage extends Component {
    inputFile = (e) => {
        const [file] = e.target.files
        if (file) {
            const { imageChange } = this.props;
            const fileURL = URL.createObjectURL(file)
            imageChange(fileURL);
        }
    };
    render() {
        return (
            <div className="upload-tab">
                <input
                    accept="image/*"
                    type='file'
                    id="imgInp"
                    onChange={this.inputFile}
                />
            </div>
        );
    }
};
export default UploadImage;
```

```js
//App.js
import UploadImage from './components/UploadImage';
... //in class App 
 handleImgChange = fileURL => {
    this.setState({ img: fileURL });
  };
... //in return
<UploadImage imageChange={this.handleImgChange} />

```

ì—…ë¡œë“œ ë²„íŠ¼ì„ ì»´í¬ë„ŒíŠ¸í™” ì‹œì¼œë´¤ìŠµë‹ˆë‹¤.( _ì œëŒ€ë¡œ í•œê±´ì§€ ì˜ë¬¸ì´ë„¤ìš”.)_
`state`ì•ˆì˜ `img`ëŠ” ì´ë¯¸ì§€íŒŒì¼ì˜ ì£¼ì†Œë¥¼ ê°€ì§€ê³  ìˆëŠ”ë°,
ì—…ë¡œë“œ ë²„íŠ¼ì´ ëˆŒë¦¬ë©´ íŒŒì¼ í™•ì¸ì„ í•˜ì—¬ `state.img` ë¥¼ ë³€ê²½í•´ì£¼ëŠ” ê²ë‹ˆë‹¤.

`App` ì˜ `return`ë¶€í„° ë³´ë©´
`<UploadImage imageChange={this.handleImgChange} />`
ë¶€ëª¨(`App`)ê°€ ìì‹(`UploadImage`)ì—ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë¥¼ ì¤ë‹ˆë‹¤.
ê·¸ê±´ ë°”ë¡œ `handleImgChange`ì¸ë°ìš”, ìì‹ì€ `this.props.imageChange` ë¡œì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” í˜„ì¬ `state` ì¤‘ `img` ê°’ì„ ë³€ê²½í•˜ëŠ”ë° ì´ í•¨ìˆ˜ë¥¼ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ í•¨ìœ¼ë¡œì„œ ìì‹ì´ ë¶€ëª¨ì˜ `state.img`ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆê²Œ ë˜ëŠ” ê±°ì£ .
> _ğŸ˜¥ì €ë„ ì§€ê¸ˆ ê³µë¶€ì¤‘ì´ë¼ ìµœì„ ì˜ ë°©ë²•ì´ ì•„ë‹ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤._

ê·¸ë¦¬ê³  `UploadImage.js` ë¥¼ í™•ì¸í•˜ê² ìŠµë‹ˆë‹¤.

```js
        return (
            <div className="upload-tab">
                <input
                    accept="image/*"
                    type='file'
                    id="imgInp"
                    onChange={this.inputFile}
                />
            </div>
```

`<input>` í•˜ë‚˜ ìƒì„±í•´ì£¼ê³  `accept`ë¥¼ í†µí•´ ë“¤ì–´ì˜¬ ê°’ì´ `image`ì„ì„ ì•Œë ¤ì¤ì‹œë‹¤. ê·¸ë¦¬ê³  `type` ì„¤ì •í•˜ê³  , `onChange` ë³€ê²½ì‹œ ì‹œì‘í•  í•¨ìˆ˜ë¥¼ ì´ì œ ë§Œë“¤ì–´ì¤„ `inputFile()` ë¡œ ì§€ì •í•©ì‹œë‹¤

```js
    inputFile = (e) => {
        const [file] = e.target.files
        if (file) {
            const { imageChange } = this.props;
            const fileURL = URL.createObjectURL(file)
            imageChange(fileURL);
        }
    };
```

`e` ë¼ëŠ” ì´ë²¤íŠ¸ë¥¼ ë°›ê²Œí•œ í›„, `file`ì„ í™•ì¸í•˜ê³  íŒŒì¼ì˜ `URL`ì„ ìƒì„±í•´ì¤€ í›„ `state.img` ë¥¼ ë°”ê¾¸ê¸°ìœ„í•´ ì•„ê¹Œ ì „ë‹¬ë°›ì€ `this.props.imageChange`ë¥¼ ì‚¬ìš©í•©ì‹œë‹¤.

> ì €ë„ [ìŠ¤íƒí”Œë¡œìš°](https://stackoverflow.com/questions/4459379/preview-an-image-before-it-is-uploaded)ì—ì„œ ë„ì›€ë°›ì•˜ìŠµë‹ˆë‹¤.

```js
  componentDidUpdate() {
    this.createCanvas();
  }
```

`componentDidMount()` ê¸°ì–µë‚˜ì‹œë‚˜ìš”?
**`componentDidUpdate()`ëŠ” ê°±ì‹ ì´ ì¼ì–´ë‚œ ì§í›„ì— í˜¸ì¶œë©ë‹ˆë‹¤. ì´ ë©”ì„œë“œëŠ” ìµœì´ˆ ë Œë”ë§ì—ì„œëŠ” í˜¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ ê°±ì‹ ì‹œ í˜¸ì¶œë˜ëŠ” ì´ ë©”ì„œë“œëŠ”**  ë‹¤ìš´ë¡œë“œì™€ í…ìŠ¤íŠ¸ ì…ë ¥ì—ì„œë„ í˜¸ì¶œë˜ëŠ”ë°ìš”, ì´ë²ˆê²½ìš°ì—ì„  ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸ì‹œ ìº”ë²„ìŠ¤ì˜ ìƒíƒœë¥¼ ë³€ê²½í•´ì£¼ê¸°ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.
> `componentDidUpdate()`ëŠ” ë­”ë°? -> [ì°¸ê³ ìë£Œ](https://ko.reactjs.org/docs/react-component.html#componentdidmount)

---

## ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ

> [![ë§í¬](https://images.velog.io/images/gup97/post/9a140c64-63d4-4e18-bd29-2d3986e16ff9/sample%20(2).png)](https://www.youtube.com/watch?v=sqj7KxwWdHg)ì‚¬ì§„ì„ í´ë¦­í•˜ë©´ 5ë¶„ ì‰´ ìˆ˜ìˆìŠµë‹ˆë‹¤.

ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œë„ ë˜‘ê°™ì´ ì½”ë“œ ì „ì²´ë¶€í„° í™•ì¸í•´ë³´ì

```js
//DownloadImage.js
import React, { Component } from "react";
class DownloadImage extends Component {
    inputDownloadBtn = (e) => {
        const { href, handleCanvasHref } = this.props;
        const canvasRef = this.props.canvas;
        const canvas = canvasRef.current;
        const url = canvas.toDataURL();
        href !== url && handleCanvasHref(url);
    };
    render() {
        return (
            <a
                onClick={this.inputDownloadBtn}
                href={this.props.href}
                className="download-button"
                download="sample.png">
                Download
            </a>
        );
    }
};
export default DownloadImage;
```

```js
//App.js
import DownloadImage from './components/DownloadImage';
... //in class App 
  handleCanvasHref = href => {
    this.setState({ href });
  };
... //in return
     <DownloadImage href={this.state.href}
          canvas={this.canvasRef}
          handleCanvasHref={this.handleCanvasHref} />
```

ë‹¤ìš´ë¡œë“œë„ ì—…ë¡œë“œì²˜ëŸ¼ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤. ì—…ë¡œë“œì™€ ì°¨ì´ì ì´ë¼ë©´ `href` ì™€ `canvas` ë¥¼ ë°›ëŠ”ê±´ë° ì´ê²ƒì€ ë‹¤ìš´ë¡œë“œì˜ `inputDownloadBtn`ë¥¼ ë³´ë©´ ì´í•´í•˜ê¸° í¸í•©ë‹ˆë‹¤. ë‹¤ìš´ë¡œë“œë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ, ìº”ë²„ìŠ¤ì˜ í˜„ì¬ìƒíƒœë¥¼ ê°€ì ¸ì™€ì„œ ë‹¤ìš´ë°›ê²Œ í•´ì£¼ëŠ”ë°, ì´ ë¶€ë¶„ì€ [ë°°ë„ˆ ìƒì„±ê¸°](https://velog.io/@godori/banner-maker#%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C)ì˜ ë„ì›€ì„ ë§ì´ ë°›ì•˜ìŠµë‹ˆë‹¤.

> ê°‘ìê¸° ë¶„ìœ„ê¸° ë””ìŠ¤ì „![ëŠë¦°íƒ€ì](https://images.velog.io/images/gup97/post/405e9b08-32e8-4cac-bdb5-62fa9e004c93/1.gif)ë‹¤ë§Œ ì°¨ì´ì ì´ë¼ë©´ ì € ë°°ë„ˆìƒì„±ê¸°ì—ì„œ `setState(href)`ê°€ `componentUpdate()`ì—ì„œ ì´ë£¨ì–´ì ¸ ì»´í¬ë„ŒíŠ¸ì˜ ë³€ê²½ ì‹œ ì—…ë°ì´íŠ¸ê°€ ë‘ë²ˆì”© í˜¸ì¶œë˜ì–´ íƒ€ìê°€ ë¹ ë¥¼ì‹œ ì‚´ì§ ë¶ˆí¸í•´ì§€ëŠ” ë¬¸ì œ ë•Œë¬¸ì— ì €ëŠ” `canvas`ìƒì„±ì„ `App.js`ë¡œ ì´ë™ì‹œì¼°ìŠµë‹ˆë‹¤.
_(ì´ ë¶€ë¶„ì— ê´€í•´ì„  ê³µë¶€í•œ í›„ ê¸€ í•˜ë‚˜ ë” ì“°ë ¤ê³  í•©ë‹ˆë‹¤.)_

---

## í…ìŠ¤íŠ¸ ì…ë ¥

ì´ë•Œê¹Œì§€ í–ˆë˜ ê²ƒ ì²˜ëŸ¼ ë¹„ìŠ·í•˜ê²Œ í•©ë‹ˆë‹¤

```js
//App.js
import TextInput from './components/TextInput';
...
  handleTextChange = e => {
    this.setState({ text: e.target.value });
  };
...
```

```js
//TextInput.js
import React, { Component } from "react";
class TextInput extends Component {
    render() {
        return (
            <input className="textInput"
                onChange={this.props.onChange}
                type="text"
                size="40"
                placeholder="Type text here!" />
        );
    }
};
export default TextInput;
```

í…ìŠ¤íŠ¸ê°€ ì…ë ¥ë˜ë©´ `App`ì˜ `state.text` ë¥¼ ë³€ê²½í•´ì£¼ëŠ”ê±°ì£ .
ë˜‘ê°™ì€ êµ¬ì¡°ê°€ ë°˜ë³µë˜ì—ˆìœ¼ë‹ˆ ë„˜ì–´ê°€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤ğŸ™„

---

## í…ìŠ¤íŠ¸ ì¶œë ¥

í…ìŠ¤íŠ¸ëŠ” ìº”ë²„ìŠ¤ì— ì´ë¯¸ì§€ê°€ ì „ë¶€ ë¡œë“œëœ ë‹¤ìŒ ê·¸ë ¤ì ¸ì•¼ í•˜ê¸° ë•Œë¬¸ì— `canvas` ì˜ `image.onload`ê°€ ìˆëŠ”`App.js`ì— ì½”ë“œë¥¼ ë„£ì—ˆìŠµë‹ˆë‹¤. ì‚¬ì‹¤ `canvas` ë¶€ë¶„ì„ ë”°ë¡œ ì»´í¬ë„ŒíŠ¸í™” ëª»ì‹œí‚¨ ìƒí™©ì—ì„œ ì‹¤ë ¥ ë¶€ì¡±ì„ ëŠê»´ ì € ìì‹ ê³¼ íƒ€í˜‘í•œ ë¶€ë¶„ì…ë‹ˆë‹¤. ë§Œì•½ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìº”ë²„ìŠ¤ë¥¼ ë§Œë“¤ê³  ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì•„ì‹œëŠ”ë¶„ì€ **ì œë°œ í›ˆìˆ˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤**

```js
//App.js
...
this.state={      
      fontFamily: 'Nanum Gothic',
      fontColor: "White",
      fontSize: 30,}
...
createCanvas(){
 ...
    image.onload=()=>{
     ...
        //ì´ ë¶€ë¶„ì— í•œì¤„ ì¶”ê°€ 
        this.setFont(canvas, text);
    }
}
  setFont(canvas, text) {
    const ctx = canvas.getContext("2d");
    const { fontFamily, fontSize, fontColor } = this.state;
    const { textBorder } = 'black';

    ctx.fillStyle = fontColor;
    ctx.textAlign = 'center';
    ctx.textBaseLine = 'middle';
    ctx.font = `normal ${fontSize}px ${fontFamily}`;

    const lines = text.split('\n');
    lines.forEach((line, index) => {
      ctx.lineWidth = fontSize / 6;
      ctx.strokeStyle = `${textBorder}`;
      ctx.strokeText(
        line,
        canvas.width / 2,
        canvas.height - fontSize * (lines.length - index) * 1.5,
      );

      ctx.fillStyle = fontColor;
      ctx.fillText(
        line,
        canvas.width / 2,
        canvas.height - fontSize * (lines.length - index) * 1.5,
      );
    });
  };
...
return(...<TextInput onChange={this.handleTextChange} />)
```

ë„¤ ì´ ì½”ë“œë¥¼ ë³´ë©´ [ê³½ì² ìš© ì§¤ ìƒì„±ê¸°](https://wormwlrm.github.io/2019/10/13/Kwakcheolyong-Image-Creator-Development-Story.html)ì˜ ì½”ë“œì™€ ê±°ì˜ ë¹„ìŠ·í•œê±¸ ëŠë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¨ í•˜ë‚˜ì˜ ì°¨ì´ì ì´ë¼ë©´ `ctx.lineWidth = fontSize / 6` ìœ¼ë¡œ ê¸€ìê°€ ì»¤ì¡Œì„ ë•Œ ê·¸ë¦¼ì ì ìš©ì´ ìˆê² ë„¤ìš”...

`state`ì—ì„œ `text`ì¡°ê±´ë“¤ì„ ì¶”ê°€í•˜ê³  ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ `canvas`ì— `text`ë¥¼ ê·¸ë ¤ì¤ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [ë¸”ë¡œê·¸](https://wormwlrm.github.io/2019/10/13/Kwakcheolyong-Image-Creator-Development-Story.html)ì—ì„œ í™•ì¸í•˜ì„¸ìš”
> ì–µì§¤![í™ë³´](https://images.velog.io/images/gup97/post/8dc9d8fd-0e54-4151-8bcd-d7b5e9669402/sample%20(3).png)ì„±ì˜ ì—†ì–´ ë³´ì´ì§€ë§Œ ë¸”ë¡œê·¸ì— ì •ë¦¬ê°€ ì˜ë¼ìˆê¸°ë„ í•˜ê³ , í° ë³€ê²½ ì ì´ ì—†ëŠ” ì½”ë“œì—¬ì„œ ì´ë ‡ê²Œ í–ˆìŠµë‹ˆë‹¤. ê¼­ í•œë²ˆ ë†€ëŸ¬ê°€ë³´ì„¸ìš”

---

## í…ìŠ¤íŠ¸ ì˜µì…˜

í…ìŠ¤íŠ¸ ì˜µì…˜ì€ ë‚˜ì¤‘ì— UI ë°”ê¾¸ë©´ì„œ ê°™ì´ ì‘ì—…í•˜ë ¤ê³  ì•„ê»´ë’€ì§€ë§Œ..

> ![ê¸°í›ˆì´í˜•](https://images.velog.io/images/gup97/post/02e15ae0-cab4-4326-8c2c-aa1aa88cf499/2.gif)í…ìŠ¤íŠ¸ í¬ê¸°ê°€ ì‘ì•„ í™”ë‚´ëŠ”ê²Œ ë¬´ì„­ì§€ê°€ ì•Šë‹¤.

ëª¨ë°”ì¼ì—ì„œ í…ŒìŠ¤íŠ¸í–ˆì„ë•Œ, ì´ë¯¸ì§€ê°€ ì»¤ì¡Œì„ë•Œì—  í°íŠ¸í¬ê¸°ê°€ ëª»ë”°ë¼ì˜¤ëŠ” ë¬¸ì œë•ë¶„ì— ê¸‰í•˜ê²Œ ë„£ì—ˆìŠµë‹ˆë‹¤. ë¹ ë¥´ê²Œ `TextOption.js` íŒŒì¼ ë§Œë“¤ì–´ì„œ ì§‘ì–´ë„£ê³ 

```js
//TextOption.js
import React, { Component } from "react";
class TextOption extends Component {
    render() {
        return (
            <div>
                <span>text size : </span>
                <input type="number"
                    value={this.props.fontSize}
                    onChange={this.props.onChange}>
                </input>
            </div>
        );
    }
};
export default TextOption;
```

```js
//App.js
import TextOption from './components/TextOption';
...
  handleFontSizeChange = e => {
    this.setState({ fontSize: e.target.value });
  };
...
   return(...
     <TextOption fontSize={this.state.fontSize}
          onChange={this.handleFontSizeChange} />
  )
```

ì´ëŸ¬ë©´ ê¹”ë”í•˜ê²Œ í…ìŠ¤íŠ¸ ì‚¬ì´ì¦ˆë¥¼ ì¡°ì •í•  ìˆ˜ ìˆë‹¤.
![ê¸°í›ˆì´í˜•2](https://images.velog.io/images/gup97/post/b744f15e-e4e7-4bb5-a1eb-5cef58d0cf3b/3.gif)

---

## ìµœì†Œì˜ CSS

`css` ì „ì²´íŒŒì¼ì€ [github](https://github.com/gup97/subtitle-maker) ì— ìˆìŠµë‹ˆë‹¤(App.css)
ë‚˜ì¤‘ì— ë” ì´ì˜ê²Œ ë§Œë“¤ë©´ ê·¸ë•Œ ë´ì£¼ì‹œê¸¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤..
í•˜ì§€ë§Œ í˜¹ì‹œ ëª¨ë¥´ëŠ” ì‚¬ëŒì´ ìˆì„ ìˆ˜ë„ ìˆìœ¼ë‹ˆ í•˜ë‚˜ë§Œ ì˜¬ë¦¬ê³  ëë‚´ê² ìŠµë‹ˆë‹¤.

```css
canvas {
  width: 100%;
 ...
}
```

ìŠ¤ë§ˆíŠ¸í° ì¹´ë©”ë¼ë¡œ ì°ì€ ì‚¬ì§„ë“¤ì€ ë‹¤ë¥¸ ì‚¬ì§„ë³´ë‹¤ í›¨ì”¬ í¬ê¸° ë•Œë¬¸ì— í™”ë©´ì„ ëš«ê³  ì§€ë‚˜ê°€ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. `width`ë¥¼ `100%` ë¡œ ì •ì˜í•´ì¤˜ì•¼ ê¹”ë”í•˜ê²Œ ë‚˜ì˜µë‹ˆë‹¤. ê°„ë‹¨í•˜ì§€ë§Œ ì €ëŠ” ëª°ë¼ì„œ êµ¬ê¸€ë§ê¹Œì§€ í–ˆìŠµë‹ˆë‹¤...í‘í‘
![ë¹„êµì‚¬ì§„](https://images.velog.io/images/gup97/post/34c1cc84-c5b1-40cc-be34-b5b24d247e1e/image.png)

---

## í›„ê¸°

ì•„ì§ í•´ê²°í•´ì•¼ í•  ë¬¸ì œë„ ìŒ“ì—¬ìˆê³ , ê³µë¶€í•  ê²ƒë„ ë§ì´ ë‚¨ì•˜ì§€ë§Œ, ê²°ê³¼ë¬¼ì„ ë³´ë‹ˆ ë§ˆìŒì´ ë”°ëœ»í•´ì§€ë„¤ìš”. ê·¸ë¦¬ê³  ê¸€ ì“°ëŠ” ê²Œ ìµìˆ™ì§€ ì•Šì•„ 2ì¼ ë§Œì— ë§Œë“  ì´ ì‘ì—…ë¬¼ë„ ê¸€ ì“°ë ¤ë‹ˆ í•˜ë£¨ë¥¼ ëª¨ì¡°ë¦¬ ë‹¤ íƒœì›Œë„ ë¶€ì¡±í–ˆìŠµë‹ˆë‹¤. ë”±ë”±í•œ í˜•ì‹ì„ ê±°ìŠ¤ë¥´ê³  í¸í•œ ë§íˆ¬ë¥¼ ìœ ì§€í•˜ë ¤ê³  ë…¸ë ¥í•˜ì§€ë§Œ ë‚˜ë„ ëª¨ë¥´ê²Œ ë§íˆ¬ê°€ ë³´ê³ ì„œì²˜ëŸ¼ ë”±ë”±í•˜ê²Œ ë°”ë€Œê³¤ í•˜ëŠ” ê±¸ ë³´ê³  ì•„ì§ ê¸€ì“°ëŠ”ê²Œ ìµìˆ™ì¹˜ ì•Šë‹¤ê³  ìƒê°í•˜ê³ ... ë§íˆ¬ ë¿ë§Œ ì•„ë‹ˆë¼ ê¸€ë„ ë‹¤ì‹œ ì½ì–´ë³´ë‹ˆ ë‘ì„œì—†ì–´ì„œ ê¸€ë„ ì¢€ ë§ì´ ì¨ë´ì•¼ ì ì  ì˜ ì“¸ ê±° ê°™ë„¤ìš”

> ì–´ì°Œëë“  ë¶€ì¡±í•œê¸€ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.
ì½”ë“œë³´ê¸° : [GitHub](https://github.com/gup97/subtitle-maker) // ì§ì ‘ ê°€ì„œë³´ê¸° :  [GitHub Page](https://gup97.github.io/subtitle-maker/)

![ì„±ê³µì˜ë°˜ëŒ€](https://images.velog.io/images/gup97/post/a61bd995-ae9c-4bf8-8a02-63660b90c92e/%EB%9E%84_%EC%84%B1%EA%B3%B5%EC%9D%98%EB%B0%98%EB%8C%80.gif)

> ë‚˜ì¤‘ì— ì‘ì„±í•  ê¸€ ëª©ë¡ + ë‚˜ì¤‘ì— í•´ê²°í•´ì•¼í•  ë¬¸ì œ

- ì™œ `<canvas>`ë¥¼ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ê°€ ì•„ë‹Œ `App.js`ì—ì„œ ë§Œë“¤ê²Œ ë˜ì—ˆë‚˜?
- `ref` ì†ì„±ì— ëŒ€í•˜ì—¬
- `image` ë¥¼ `import`í•´ì„œ ì¨ì•¼í•˜ëŠ” ì´ìœ 
- `state` ì•ˆì—ì„œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
- `scss` ë¡œ ê¾¸ë¯¸ê¸° / `font Option`ë“¤ ì¶”ê°€
